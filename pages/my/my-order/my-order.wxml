
<view>
    <import src='/components/tips-cancel-order/tips-cancel-order.wxml' />

    <import src='/components/tips-delete-order/tips-delete-order.wxml' />
    <!--搜索结果异常显示  -->
    <import src='/components/result-tips/result-tips.wxml' />
    <view class='my-order'>
        <view class="tab-area">
            <view class="{{num==0?'active':''}}" bindtap="getList" data-index="0">全部</view>
            <view class="{{num==1?'active':''}}" bindtap="getList" data-index="1">待支付</view>
            <view class="{{num==2?'active':''}}" bindtap="getList" data-index="2">待发货</view>
            <view class="{{num==3?'active':''}}" bindtap="getList" data-index="3">待收货</view>
            <view class="{{num==4?'active':''}}" bindtap="getList" data-index="4">已完成</view>
        </view>
        <view class="order-list" wx:for="{{list}}" wx:key="unique" wx:for-item="item">
            <view class="header" bindtap="toOrderDetail" data-id="{{item.id}}" data-status="{{item.status}}">
                <view class="left">
                    订单编号：{{item.orderNum}}
                </view>
                <view class="order-status right">
                    <text wx:if="{{num==1}}">待支付</text>
                    <text wx:elif="{{num==2}}">待发货</text>
                    <text wx:elif="{{num==3}}">待收货</text>
                    <text wx:elif="{{num==4}}">已完成</text>
                    <text wx:else>
                        <text wx:if="{{item.status==1}}">待支付</text>
                        <text wx:elif="{{item.status==2}}">待发货</text>
                        <text wx:elif="{{item.status==3}}">待收货</text>
                        <text wx:elif="{{item.status==4}}">待自提</text>
                        <text wx:elif="{{item.status==5}}">已确认</text>
                        <text wx:elif="{{item.status==7}}">已完成</text>
                        <text wx:elif="{{item.status==8}}">已关闭</text>
                    </text>
                </view>
            </view>
            <view class="clearfix"></view>
            <view class="body">
                <view class="item-area" bindtap="toOrderDetail" data-id="{{item.id}}" data-status="{{item.status}}">
                    <view class="item" wx:for="{{item.orderProduct}}" wx:key="item"  wx:for-item="oItem">
                        <image src="{{oItem.imgUrl}}" alt=""></image>
                        <view class="goods-inf">
                            <view class="ellipsis-2">{{oItem.productName}}
                            </view>
                            <view class="color-classify">颜色分类：长袖 紫色</view>
                        </view>
                        <view>
                            <view class="price">￥{{oItem.price}}</view>
                            <!--<view class="org-price">￥{{item.price}}</view>-->
                            <view class="num">x{{oItem.num}}</view>
                        </view>
                    </view>
                    <!--<view class="item">-->
                    <!--<image src="/img/avatar.jpg" alt=""></image>-->
                    <!--<view class="goods-inf">-->
                    <!--<view class="ellipsis-2">HEERIOBAN-->
                    <!--慵懒随意春装2018新款女毛呢格纹编制流苏...小香风外套毛呢格纹编制流苏...小香风外套毛呢格纹编制流苏...小香风外套-->
                    <!--</view>-->
                    <!--<view class="color-classify">颜色分类：长袖 紫色</view>-->
                    <!--</view>-->
                    <!--<view>-->
                    <!--<view class="price">￥{{item.price}}</view>-->
                    <!--<view class="org-price">￥{{item.price}}</view>-->
                    <!--<view class="num">x{{item.num}}</view>-->
                    <!--</view>-->
                    <!--</view>-->
                </view>

                <view class="amount">
                    <text>共{{item.orderProduct.length}}件商品 合计：</text>
                    <text class="money">￥{{item.price+item.freightPrice}}</text>
                    <text class="freight">(含运费￥{{item.freightPrice}})</text>
                </view>
                <view class="time">
                    <text wx:if="{{num==4||(num==0&&item.status==7)}}">完成时间：</text>
                    <text wx:elif="{{num==3||(num==0&&item.status==3)}}">发货时间：</text>
                    <text wx:else>创建时间：</text>{{item.orderCreateTime}}
                </view>
                <view wx:if="{{num!=2&&item.status!=2&&item.status!=5&&item.status!=8&&item.status!=9&&item.status!=10}}">
                    <view class="footer">
                        <view class="left" wx:if="{{num==1||(num==0&&item.status==1)}}">
                            27:45:45后自动取消订单
                        </view>
                        <view class="right" wx:if="{{num==4||(num==0&&item.status==7)}}">
                            <view class="cancel-btn" bindtap="deleteItem" data-id="{{item.id}}" data-status="{{item.status}}">删除订单</view>
                            <view class="pay-btn" bindtap='continueBuy' data-id="{{item.id}}">再次购买</view>
                        </view>
                        <view class="right" wx:elif="{{num==1||(num==0&&item.status==1)}}">
                            <view class="cancel-btn" bindtap="cancelItem" data-ordernum="{{item.orderNum}}">取消订单</view>
                            <view class="pay-btn" bindtap='continuePay'  data-item="{{item}}">立即支付</view>
                        </view>
                        <view class="right" wx:elif="{{num==3||(num==0&&item.status==3)}}">
                            <view class="cancel-btn">查看物流</view>
                            <view class="pay-btn" bindtap="confirmReceipt"  data-id="{{item.id}}">确认收货</view>
                        </view>
                    </view>
                    <view class="clearfix"></view>
                </view>
            </view>

        </view>
        <!--搜索结果异常显示 tipVal  -->
        <template is="result-tips" v-if='{{tipVal}}' data="{{tipVal}}" />
        <!--<view class="order-list">
            <view class="header">
                <view class="left">
                    订单编号：45154155164512
                </view>
                <view class="order-status right">
                    待支付
                </view>
            </view>
            <view class="clearfix"></view>
            <view class="body">
                <view class="item-area">
                    <view class="item">
                        <image src="/img/avatar.jpg" alt=""></image>
                        <view class="goods-inf">
                            <view class="ellipsis-2">HEERIOBAN
                                慵懒随意春装2018新款女毛呢格纹编制流苏...小香风外套毛呢格纹编制流苏...小香风外套毛呢格纹编制流苏...小香风外套
                            </view>
                            <view class="color-classify">颜色分类：长袖 紫色</view>
                        </view>
                        <view>
                            <view class="price">￥150.00</view>
                            <view class="org-price">￥159.00</view>
                            <view class="num">x2</view>
                        </view>
                    </view>
                    <view class="item">
                        <image src="/img/avatar.jpg" alt=""></image>
                        <view class="goods-inf">
                            <view class="ellipsis-2">HEERIOBAN
                                慵懒随意春装2018新款女毛呢格纹编制流苏...小香风外套毛呢格纹编制流苏...小香风外套毛呢格纹编制流苏...小香风外套
                            </view>
                            <view class="color-classify">颜色分类：长袖 紫色</view>
                        </view>
                        <view>
                            <view class="price">￥150.00</view>
                            <view class="org-price">￥159.00</view>
                            <view class="num">x2</view>
                        </view>
                    </view>
                </view>

                <view class="amount">
                    <text>共2件商品 合计：</text>
                    <text class="money">￥300.00</text>
                    <text class="freight">(含运费0.00)</text>
                </view>
                <view class="time">
                    创建时间：2018-05-05 12:45:45
                </view>
                <view class="footer">
                    <view class="left">
                        27:45:45后自动取消订单
                    </view>
                    <view class="right">
                        <view class="cancel-btn">取消订单</view>
                        <view class="pay-btn">立即支付</view>
                    </view>
                </view>
                <view class="clearfix"></view>
            </view>

        </view>-->

    </view>

    <!--提示框  -->
    <template is="tips-cancel-order" data='{{isCancel,reason,content}}'/>

    <template is="tips-delete-order" data='{{isDelete}}'/>
</view>

